{"version":3,"sources":["context/keys.js","components/Key.js","components/Keyboard.js","App.js","utils/index.js","index.js"],"names":["keysContext","createContext","validKeys","setValidKeys","Provider","Consumer","Key","content","keyName","type","useContext","useState","pressed","setPressed","handleKeyDown","useCallback","event","key","curr","toLowerCase","handleKeyUp","useEffect","window","addEventListener","removeEventListener","className","includes","onClick","setTimeout","filter","charAt","toUpperCase","slice","Keyboard","visual","this","_visual","_key","_done","_id","uuid","done","id","Space","App","speed","setSpeed","tempMs","setTempMs","focused","setFocused","doneKeys","setDoneKeys","expectedKeys","setExpectedKeys","totalKeys","setTotalKeys","failedKeys","setFailedKeys","generateSequence","max","group","i","push","length","Math","floor","random","GROUP_AMOUNT","getSpeed","letters","time","isNaN","isFinite","toFixed","keys","value","onKeyPress","preventDefault","Date","now","firstExpectedEl","isValid","validate","invalidate","onFocus","onBlur","map","keyClass","element","errors","round","getErrors","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.0b0574d6.chunk.js","sourcesContent":["import { createContext } from 'react';\n\nconst keysContext = createContext({\n  validKeys: [],\n  setValidKeys: [],\n});\n\nexport const keysProvider = keysContext.Provider;\nexport const keysConsumer = keysContext.Consumer;\n\nexport default keysContext;\n","import React, { useCallback, useContext, useEffect, useState } from 'react';\n\nimport keysContext from '../context/keys';\n\nconst Key = ({ content = 'a', keyName = content, type = '' }) => {\n  const { validKeys, setValidKeys } = useContext(keysContext);\n\n  const [pressed, setPressed] = useState(false);\n\n  const handleClick = () => {\n    setPressed(true);\n    setTimeout(() => setPressed(false), 200);\n\n    if (validKeys.includes(content.toLowerCase())) setValidKeys((curr) => curr.filter((key) => key !== content.toLowerCase()));\n    else setValidKeys((curr) => [...curr, content.toLowerCase()]);\n  };\n\n  const handleKeyDown = useCallback(\n    (event) => {\n      if (event.key === 'Alt') return;\n\n      setPressed((curr) => (event.key.toLowerCase() === keyName.toLowerCase() ? true : curr));\n    },\n    [keyName]\n  );\n\n  const handleKeyUp = useCallback(\n    (event) => {\n      setPressed((curr) => (event.key.toLowerCase() === keyName.toLowerCase() ? false : curr));\n    },\n    [keyName]\n  );\n\n  useEffect(() => {\n    window.addEventListener('keydown', handleKeyDown);\n    window.addEventListener('keyup', handleKeyUp);\n\n    return () => {\n      window.removeEventListener('keydown', handleKeyDown);\n      window.removeEventListener('keyup', handleKeyUp);\n    };\n  }, [handleKeyDown, handleKeyUp]);\n\n  return (\n    <div className={`key ${type} ${pressed ? 'down' : 'up'} ${!validKeys.includes(content.toLowerCase()) ? 'disabled' : ''}`} onClick={handleClick}>\n      <span className='content'>{content.charAt(0).toUpperCase() + content.slice(1)}</span>\n    </div>\n  );\n};\n\nexport default Key;\n","import React from 'react';\n\nimport Key from './Key';\n\nimport './Keyboard.css';\n\nconst Keyboard = () => {\n  return (\n    <div className='keyboard'>\n      <div className='row'>\n        <Key content='1' />\n        <Key content='2' />\n        <Key content='3' />\n        <Key content='4' />\n        <Key content='5' />\n        <Key content='6' />\n        <Key content='7' />\n        <Key content='8' />\n        <Key content='9' />\n        <Key content='0' />\n        <Key content=')' />\n        <Key content='=' />\n        <Key content='Del' type='del' keyName='Backspace' />\n      </div>\n\n      <div className='row'>\n        <Key content='Tab' type='tab' />\n        <Key content='a' />\n        <Key content='z' />\n        <Key content='e' />\n        <Key content='r' />\n        <Key content='t' />\n        <Key content='y' />\n        <Key content='u' />\n        <Key content='i' />\n        <Key content='o' />\n        <Key content='p' />\n        <Key content='^' />\n        <Key content='$' />\n        <Key content='*' />\n      </div>\n\n      <div className='row'>\n        <Key content='Caps Lock' type='caps-lock' />\n        <Key content='q' />\n        <Key content='s' />\n        <Key content='d' />\n        <Key content='f' />\n        <Key content='g' />\n        <Key content='h' />\n        <Key content='j' />\n        <Key content='k' />\n        <Key content='l' />\n        <Key content='m' />\n        <Key content='Ã¹' />\n        <Key content='Enter' type='enter' />\n      </div>\n\n      <div className='row'>\n        <Key content='Shift' type='l-shift' />\n        <Key content='<' />\n        <Key content='w' />\n        <Key content='x' />\n        <Key content='c' />\n        <Key content='v' />\n        <Key content='b' />\n        <Key content='n' />\n        <Key content=',' />\n        <Key content=';' />\n        <Key content=':' />\n        <Key content='!' />\n        <Key content='Shift' type='r-shift' />\n      </div>\n\n      <div className='row'>\n        <Key content='Ctrl' type='ctrl' keyName='Control' />\n        <Key content='Alt' type='alt' keyName='Alt' />\n        <Key content='-' type='space' keyName=' ' />\n        <Key content='Alt Gr' type='alt-gr' keyName='Alt Gr' />\n        <Key content='Ctrl' type='ctrl' keyName='Control' />\n      </div>\n    </div>\n  );\n};\n\nexport default Keyboard;\n","import './App.css';\nimport React, { useCallback, useEffect, useState } from 'react';\n\nimport Keyboard from './components/Keyboard';\n\nimport keysContext from './context/keys';\n\nimport { v4 as uuid } from 'uuid';\n\nimport { getRandomInt } from './utils';\n\nconst ROW_SIZE = 4;\nconst GROUP_AMOUNT = 4;\n\nclass Key {\n  constructor(key, visual = key) {\n    this._visual = visual;\n    this._key = key;\n\n    this._done = null;\n\n    this._id = uuid();\n  }\n\n  validate() {\n    this._done = true;\n  }\n\n  invalidate() {\n    this._done = false;\n  }\n\n  get element() {\n    let className = 'key';\n\n    if (this.done === true) className += ' valid';\n    if (this.done === false) className += ' invalid';\n\n    return (\n      <span className={className} key={this.id}>\n        {this.visual}\n      </span>\n    );\n  }\n\n  get key() {\n    return this._key;\n  }\n\n  get visual() {\n    return this._visual;\n  }\n\n  get done() {\n    return this._done;\n  }\n\n  get id() {\n    return this._id;\n  }\n}\n\nclass Space extends Key {\n  constructor() {\n    super(' ', '_');\n  }\n}\n\nconst App = () => {\n  const [speed, setSpeed] = useState(0);\n  const [tempMs, setTempMs] = useState(0);\n\n  const [validKeys, setValidKeys] = useState(['q', 's', 'd', 'f', 'j', 'k', 'l', 'm']);\n  const [focused, setFocused] = useState(false);\n\n  const [doneKeys, setDoneKeys] = useState([]);\n  const [expectedKeys, setExpectedKeys] = useState([]);\n  const [totalKeys, setTotalKeys] = useState(0);\n  const [failedKeys, setFailedKeys] = useState(0);\n\n  const generateSequence = useCallback(() => {\n    setDoneKeys([]);\n    setExpectedKeys([]);\n\n    let group = [];\n\n    for (let i = 0; i < GROUP_AMOUNT; i++) {\n      for (let i = 0; i < ROW_SIZE; i++)\n        group.push(validKeys.length === 1 ? new Key(validKeys[0]) : new Key(validKeys[getRandomInt(validKeys.length - 1)]));\n\n      if (i !== GROUP_AMOUNT - 1) group.push(new Space());\n    }\n\n    setExpectedKeys(group);\n  }, [validKeys]);\n\n  useEffect(() => {\n    generateSequence();\n  }, [validKeys, generateSequence]);\n\n  const handleInputChange = (event) => {\n    event.preventDefault();\n\n    const LETTER_AMOUNT = GROUP_AMOUNT * ROW_SIZE + GROUP_AMOUNT - 1;\n\n    if (expectedKeys.length === LETTER_AMOUNT) {\n      setTempMs(Date.now());\n    }\n\n    if (expectedKeys.length === 1) {\n      setSpeed(getSpeed(LETTER_AMOUNT, Date.now() - tempMs));\n      setTotalKeys((curr) => curr + LETTER_AMOUNT);\n    }\n\n    const firstExpectedEl = expectedKeys[0];\n    const isValid = firstExpectedEl.key === event.key;\n\n    if (isValid) firstExpectedEl.validate();\n    else firstExpectedEl.invalidate();\n\n    setDoneKeys((curr) => [...curr, firstExpectedEl]);\n    setExpectedKeys((curr) => curr.slice(1));\n\n    !isValid && setFailedKeys((curr) => curr + 1);\n\n    if (expectedKeys.length === 1) generateSequence();\n  };\n\n  const getErrors = () => {\n    const errors = Math.round((failedKeys / totalKeys) * 100);\n    return isNaN(errors) || !isFinite(errors) ? 0 : errors;\n  };\n\n  const getSpeed = (letters, time) => {\n    const speed = letters / (time / 60000) / 5;\n    return isNaN(speed) || !isFinite(speed) ? 0 : speed.toFixed(0);\n  };\n\n  const focus = () => {\n    setFocused(true);\n  };\n\n  const blur = () => {\n    setFocused(false);\n  };\n\n  return (\n    <keysContext.Provider value={{ validKeys, setValidKeys }}>\n      <div className='container'>\n        <div>\n          <div className={`text-progression ${focused ? 'active' : ''}`}>\n            <input type='text' className='text-input' onKeyPress={handleInputChange} onFocus={focus} onBlur={blur} />\n\n            <p>\n              {doneKeys.map((keyClass) => keyClass.element)}\n              {expectedKeys.map((keyClass) => keyClass.element)}\n            </p>\n\n            <p>\n              <span>{getErrors()}%</span> &#160;\n              <span>{speed}wpm</span>\n            </p>\n          </div>\n\n          <Keyboard />\n        </div>\n      </div>\n    </keysContext.Provider>\n  );\n};\n\nexport default App;\n","export const getRandomInt = (max) => {\n  return Math.floor(Math.random() * Math.floor(max + 1)); // 0 and max included\n};\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './App';\n\nimport './index.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}